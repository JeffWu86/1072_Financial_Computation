clear

[St,K,r,q,sigma,T_t,M,n,Save_t,passing_time,nrolls,num_of_rep]=readdata('input_1_2.txt');

    % Binomial
    [bino_price]=Binomial(St,K,r,q,sigma,T_t,M,n,passing_time);
    
    
    
    % Monte Carlo
    [monte_price]=MonteCarlo(St,K,r,q,sigma,T_t,n,Smax_t,n,nrolls);
    sim(1:nrolls,1:n+1)=nan;
    sim(1:nrolls,1)=St;

    
    for i=1:n
        for j=1:nrolls
            mu=log(sim(j,i))+(r-q-sigma*sigma/2)*dT;
            sigma1=sigma*sqrt(dT);
            sim(j,i+1)=exp(sigma1*randn()+mu);
        end
    end
    
    price(1:nrolls,1)=nan;
    for i=1:nrolls
        price(i)= max( 0, (sum(sim(i,:))+npass*Save_t)/(npass+n+1) -K );
    end
    
    mean(price)*exp(-r*T_t)

% fprintf('Lookback Put: \nStandard Deviation: %f\n',std(LookbackPuts));
% fprintf('Under %d times of testing, 95%% of confidence interval for the call option value are: \n',num_of_rep);
% fprintf('Lower bounds: %f\n',mean(LookbackPuts)-2*std(LookbackPuts));
% fprintf('Mean          %f\n',mean(LookbackPuts));
% fprintf('Upper bounds: %f\n',mean(LookbackPuts)+2*std(LookbackPuts));
% fprintf('\n');